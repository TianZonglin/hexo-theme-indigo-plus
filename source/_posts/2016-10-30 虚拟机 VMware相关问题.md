date: 2016-10-30 
categories: Hadoop相关
tags: [VMware,调试]
comments: true
title: VMware虚拟机相关问题
---


## 主机连不上VMware，ping不通，

分析：与linux能不能上网没有关系，是VMware软件设置出错
>**可能原因**
1.服务。
打开服务，查看VM的各项服务是否为启动状态【首先要确定】
2.同一网段。
**拿NAT来说，**
①打开Vmware的虚拟网络编辑器，找到NAT对应的NAT设置，记下相应的网关和子网IP地址
②使用的是虚拟网卡VMnet8，去网络共享中心的网络适配器中查看这块网卡的属性，记下其ipv4的地址，切记要将此处的地址改为和①中地址所属同一网段的地址！（在ipv4属性中这些地址都可以自己指定）

完成后即可ping通




## 虚拟机迁移注意事项：

直接拷贝虚拟机文件；
使用对应版本的VMware虚拟机来打开它；
不知道选择“我已复制该虚拟机”;
知道选择“我已移动该虚拟机”(免设置网络IP)一定要选这个！！！
如果需要修改IP地址，要做以下内容：
>- 要改【虚拟网络编辑器】中的NAT选项页【最下方】的子网IP改成相应IP
>- ifconfig->看到所显示的信息是哪个网卡【eth0?eth1?eth2?】->看到HWADDR是什么
>- cd /etc/sysconfig/network-scripts/中 要将eth中的硬件地址与之相对应；
>- service network restart
 


## 新增加一个节点需要的工作

- 新建用户hadoop
- 增加权限
- 修改主机名

- 安装jdk，需要使用完整的jdk（oracle），使用scp直接远程拷贝
- 配置profile【root】
- 配置bashrc【hadoop】
- 在hadoop用户下测试java
- 安装hadoop，直接由scp远程拷贝而来
>  【注意】：拷贝来的hadoop文件夹，其配置文件是配置好的不用改（四个.xml文件完全相同）
：slaves文件中要因人而异，主从节点是不同的，就是由此区分
>  【首次】：对hadoop文件夹进行权限更改！！！！！ 特别重要！！！
sudo chown -R hadoop usr/local/hadoop
：关闭取消centos的防护机制，iptables，selinux
：退出hadoop的安全模式
以上完成，即可开始修改配置xml 添加进集群
>  【主机启动】start-all.sh 使用jps查看进程状态
使用hadoop dfsadmin -report查看当前hdfs状态
有异常：则查看日志log



## 新增加节点的问题
**1）防火墙设置问题：**
==>解决方案：关闭防火墙：#service iptables stop。出现三行OK，此时防火墙被关闭。重复启动集群后，发现问题没有完全解决。
**2）SELinux设置问题：**
==>解决方案：关闭SELinux：
可以编辑配置文件达到目的
     vi /etc/selinux/conf
     set SELINUX=disabled
**3）清除Hadoop集群的缓存目录（在core-sites里面设置）**

**4）格式化NameNode，同意NameNode的ID号**
==>解决方案：#hadoop namenode -format

**5）关闭Hadoop系统的安全模式：**
==>解决方案：#hadoop dfsadmin -safemode leave
 
**6）重启集群后，显示正常，且不会逐渐节点衰亡。**


  [1]: http://static.zybuluo.com/EVA001/w8lmhqblvvw2uncc5lb3ycdu/504161134898.png